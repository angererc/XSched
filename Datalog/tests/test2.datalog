.basedir "test_out"

## Domains
T 27 tasks.map
A 10 activations.map
S 10 scopes.map
N 5

.include "../schedule_analysis.core"

#a lying "F" shape
#@X: a1:A->a2:B->a3:E
#@A: a1:C
#@B: a1:D
schedules0("X", "top", "a1", "A").
schedules0("X", "top", "a2", "B").
schedules0("X", "top", "a3", "E").
schedules0("A", "top", "a1", "C").
schedules0("B", "top", "a1", "D").
arrow0("X", "a1", "a2").
arrow0("X", "a2", "a3").

#dummies to fill the empty database
formal0("<dummy>", 0, 0).
actual0("<dummy>", 0, 0, 0).
subscope0("<dummy>", 0, 0).

#assertions
ERR 256
error2(num:ERR) outputtuples

error2(0) :- parallel("A", "B").
error2(1) :- parallel("A", "D").
error2(2) :- parallel("A", "E").
error2(3) :- parallel("B", "E").
error2(4) :- !parallel("C", "B").
error2(5) :- !parallel("C", "D").
error2(6) :- !parallel("E", "D").
#also check that our unordered relation is bidirectional
error2(7) :- !parallel("B", "C").
error2(8) :- !parallel("D", "C").

