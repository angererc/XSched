.basedir "test_out"

## Domains
T 27 tasks.map
A 10 activations.map
N 5

.include "../../schedule_analysis.relations"
.include "../../structural_analysis.rules"
.include "../../schedule_analysis.rules"

ordered0("<dummy>", 0, 0).
multiple0("<dummy>", "a1").

#****************************
#test simple "later" param passing
#****************************

#@X: a1:A(a2)->a2:B->a3:C
#and: a4:D->a2 
schedules0("X", "a1", "A").
schedules0("X", "a2", "B").
schedules0("X", "a3", "C").
schedules0("X", "a4", "D").
actual0("X", "a1", 0, "a2").

arrow0("X", "a1", "a2").
arrow0("X", "a2", "a3").
arrow0("X", "a4", "a2").

#@A: a1:E->a2:F-><0>->a3:G
schedules0("A", "a1", "E").
schedules0("A", "a2", "F").
schedules0("A", "a3", "G").
formal0("A", 0, "<0>").
formal0("A", 1, "<1>").

arrow0("A", "a1", "a2").
arrow0("A", "a2", "<0>").
arrow0("A", "<0>", "a3").

#assertions
ERR 256
error3(num:ERR) outputtuples

#simple ordering
error3(11) :- parallel("A", "B").
error3(11) :- parallel("A", "C").
error3(11) :- parallel("A", "G").
error3(11) :- parallel("A", "E").
error3(11) :- parallel("A", "F").
error3(11) :- parallel("E", "F").
error3(11) :- parallel("E", "G").
error3(11) :- parallel("D", "C").
error3(11) :- !parallel("A", "D").

#ordering through param b
error3(12) :- parallel("E", "B").
error3(13) :- parallel("F", "B").
error3(14) :- parallel("B", "G").
error3(15) :- parallel("E", "C").
error3(16) :- parallel("F", "C").
error3(17) :- parallel("D", "G").
error3(18) :- parallel("A", "G").
error3(19) :- !parallel("A", "D").
error3(20) :- !parallel("E", "D").
error3(21) :- !parallel("F", "D").

#error3(99) :- tasksNotOrderedAfter("A", "<0>", "G").