.basedir "test_out"

## Domains
Object 28 objects.map
A 10 activations.map
ParamPosition 5

.include "../../schedule_analysis.relations"
.include "../../structural_analysis.rules"
.include "../../schedule_analysis.rules"

ordered0("root", "<dummy>", 0, 0).
multiple0("root", "<dummy>", "a1").

#****************************
#test simple "later" param passing
#****************************

#@X: a1:A(a2)->a2:B->a3:C
#and: a4:D->a2 
schedules0("root", "X", "a1", "root", "A").
schedules0("root", "X", "a2", "root", "B").
schedules0("root", "X", "a3", "root", "C").
schedules0("root", "X", "a4", "root", "D").
actual0("root", "X", "a1", 0, "a2").

arrow0("root", "X", "a1", "a2").
arrow0("root", "X", "a2", "a3").
arrow0("root", "X", "a4", "a2").

#@A: a1:E->a2:F-><0>->a3:G
schedules0("root", "A", "a1", "root", "E").
schedules0("root", "A", "a2", "root", "F").
schedules0("root", "A", "a3", "root", "G").
formal0("root", "A", 0, "<0>").
formal0("root", "A", 1, "<1>").

arrow0("root", "A", "a1", "a2").
arrow0("root", "A", "a2", "<0>").
arrow0("root", "A", "<0>", "a3").

#assertions
ERR 256
error3(num:ERR) outputtuples

#simple ordering
error3(11) :- parallel("root", "A", "root", "B").
error3(11) :- parallel("root", "A", "root", "C").
error3(11) :- parallel("root", "A", "root", "G").
error3(11) :- parallel("root", "A", "root", "E").
error3(11) :- parallel("root", "A", "root", "F").
error3(11) :- parallel("root", "E", "root", "F").
error3(11) :- parallel("root", "E", "root", "G").
error3(11) :- parallel("root", "D", "root", "C").
error3(11) :- !parallel("root", "A", "root", "D").

#ordering through param b
error3(12) :- parallel("root", "E", "root", "B").
error3(13) :- parallel("root", "F", "root", "B").
error3(14) :- parallel("root", "B", "root", "G").
error3(15) :- parallel("root", "E", "root", "C").
error3(16) :- parallel("root", "F", "root", "C").
error3(17) :- parallel("root", "D", "root", "G").
error3(18) :- parallel("root", "A", "root", "G").
error3(19) :- !parallel("root", "A", "root", "D").
error3(20) :- !parallel("root", "E", "root", "D").
error3(21) :- !parallel("root", "F", "root", "D").

#error3(99) :- tasksNotOrderedAfter("A", "<0>", "G").