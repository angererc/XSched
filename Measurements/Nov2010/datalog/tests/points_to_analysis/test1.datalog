.basedir "test_out"

## Domains
BC 255
Variable 26 variables.map
Object 35 objects.map
Field 10 fields.map
Type 27 types.map
Selector 3 selectors.map
Method 78 methods.map
ParamPosition 255
	
.include "./test_points_to_analysis.relations"
.include "./dummies.relations"
.include "../../points_to_analysis.rules"

roots("A.m1()").

#simple program: A<:-B and in A.m1() { B b = new B(); A a = b; }
assignable("A", "A").
assignable("A", "B").
assignable("B", "B").
variableType("A.m1()", "a", "A").
variableType("A.m1()", "b", "B").
objectType("new B()", "B").

new("A.m1()", "b", "new B()").
assign("A.m1()", "a", "b").

#assertions
ERR 256
error1(num:ERR) outputtuples

error1(0) :- !executionContext(0, 0, 0, 0, "A.m1()").
error1(1) :- !variablePT(0, 0, 0, 0, "A.m1()", "b", 0, "new B()").
error1(2) :- !canPointTo("A.m1()", "b", "new B()").
error1(3) :- !canPointTo("A.m1()", "a", "new B()").
error1(4) :- !variablePT(0, 0, 0, 0, "A.m1()", "a", 0, "new B()").